(function(e){function t(t){for(var s,a,i=t[0],u=t[1],c=t[2],l=0,d=[];l<i.length;l++)a=i[l],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&d.push(r[a][0]),r[a]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(e[s]=u[s]);f&&f(t);while(d.length)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],s=!0,a=1;a<n.length;a++){var u=n[a];0!==r[u]&&(s=!1)}s&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var s={},r={app:0},o=[];function a(e){return i.p+"js/"+({about:"about"}[e]||e)+"."+{about:"621c2702"}[e]+".js"}function i(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise((function(t,s){n=r[e]=[t,s]}));t.push(n[2]=s);var o,u=document.createElement("script");u.charset="utf-8",u.timeout=120,i.nc&&u.setAttribute("nonce",i.nc),u.src=a(e);var c=new Error;o=function(t){u.onerror=u.onload=null,clearTimeout(l);var n=r[e];if(0!==n){if(n){var s=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+s+": "+o+")",c.name="ChunkLoadError",c.type=s,c.request=o,n[1](c)}r[e]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:u})}),12e4);u.onerror=u.onload=o,document.head.appendChild(u)}return Promise.all(t)},i.m=e,i.c=s,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var f=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var s=n("85ec"),r=n.n(s);r.a},"041f":function(e,t,n){e.exports=n.p+"img/0.074aff61.jpg"},2382:function(e,t){var n={urlPreUser:"http://localhost:8007",urlPreGoods:"http://localhost:8007",urlPreOrder:"http://localhost:8007",imgRootPath:"http://localhost:88",accessTokenKey:"Authorization",accessTokenPre:"Bearer ",refreshTokenKey:"refresh_jwt",userInfo:"userInfo",goodsInfo:"goodsInfo",openAuthenticate:!0,openAuthorize:!0};e.exports=n},"3a94":function(e,t,n){"use strict";var s=n("a85f"),r=n.n(s);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],a={name:"app"},i=a,u=(n("034f"),n("2877")),c=Object(u["a"])(i,r,o,!1,null,null,null),l=c.exports,f=(n("d3b7"),n("8c4f")),d=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},p=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home"},[s("img",{attrs:{alt:"Vue logo",src:n("cf05")}})])}],h={name:"Home",components:{}},g=h,m=Object(u["a"])(g,d,p,!1,null,null,null),v=m.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("div",{staticClass:"login_box"},[e._m(0),n("div",{staticClass:"login_form"},[n("el-form",[n("el-form-item",[n("el-input",{attrs:{placeHolder:"账号"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),n("el-form-item",[n("el-input",{attrs:{"show-password":"",placeHolder:"密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),n("div",{staticClass:"login_btn"},[n("el-button",{attrs:{type:"primary"},on:{click:e.doReset}},[e._v("撤销")]),n("el-button",{attrs:{type:"primary"},on:{click:e.doLogin}},[e._v("登录")])],1)],1)])])},w=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login_img"},[s("img",{attrs:{src:n("c3b1")}})])}],k=(n("ac1f"),n("5319"),n("bc3a")),y=n.n(k),_=n("4328"),C=n.n(_),I=n("2382");y.a.defaults.timeout=2e4,y.a.interceptors.request.use((function(e){return sessionStorage.Authorization&&(e.headers.Authorization=I.accessTokenPre+sessionStorage.getItem(I.accessTokenKey),e.headers.refresh_jwt=I.accessTokenPre+sessionStorage.getItem(I.refreshTokenKey)),e}),(function(e){return Promise.reject(e)})),y.a.interceptors.response.use((function(e){var t=e.data;if(401===t.state)localStorage.removeItem(I.accessTokenKey),ie.replace("/login");else{if("202"!==t.state)return e;localStorage.setItem(I.accessTokenKey,t.accessToken),localStorage.setItem(I.refreshTokenKey,t.refreshToken)}}),(function(e){var t=e.response.status;return 401===t&&ie.replace("/login"),Promise.reject(e)}));var P={requestGet:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,s){y()({method:"get",transformRequest:[function(e){return C.a.stringify(e)}],url:e,params:t}).then((function(e){n(e.data)})).catch((function(e){s(e)}))}))},requestQuickGet:function(e){return new Promise((function(t,n){y.a.get(e).then((function(e){t(e.data)})).catch((function(e){n(e)}))}))},requestPost:function(e,t){return new Promise((function(n,s){y()({method:"post",transformRequest:[function(e){return C.a.stringify(e)}],url:e,data:t}).then((function(e){n(e.data)})).catch((function(e){s(e)}))}))},requestPostForm:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,s){y.a.post(e,t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){n(e.data)})).catch((function(e){s(e)}))}))},requestPut:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,s){y.a.put(e,t).then((function(e){n(e.data)})).catch((function(e){s(e)}))}))},requestDelete:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,s){y.a.delete(e,t).then((function(e){n(e.data)})).catch((function(e){s(e)}))}))}},S=n("2382"),x={name:"Login",data:function(){return{username:"aaa",password:"123",imgNum:""}},methods:{doLogin:function(){var e=this,t=this;P.requestPost(S.urlPreUser+"/oauth/login",{username:this.username,password:this.password}).then((function(n){if(200===n.state){e.$router.push({path:"/index/goods"});var s=n.data;sessionStorage.setItem(S.accessTokenKey,s.jwtToken),sessionStorage.setItem(S.refreshTokenKey,s.refreshToken),s.jwtToken="",s.refreshToken="",sessionStorage.setItem(S.userInfo,JSON.stringify(s))}else 400===n.state&&t.$message({message:n.fail,type:"warning",showClose:!0})}),(function(){e.$message({message:"登录失败",type:"warning",showClose:!0})}))},doReset:function(){this.password="",this.username=""}},created:function(){var e=Math.floor(10*Math.random()+1)%2;this.imgNum="../../public/"+e+".jpg"},mounted:function(){}},O=x,j=(n("3a94"),Object(u["a"])(O,b,w,!1,null,"15d6f2c2",null)),T=j.exports,$=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[s("div",{staticClass:"goods_list"},e._l(e.records,(function(t){return s("div",{key:t.goodsId,staticClass:"goods_item",on:{click:function(n){return e.gotoDetails(t)}}},[s("img",{attrs:{src:n("041f")}}),s("div",[e._v(e._s(t.name))])])})),0),s("div",{staticClass:"block"},[s("el-pagination",{attrs:{"current-page":e.pageInfo.current,"page-sizes":[1,2,8],"page-size":e.pageInfo.size,layout:"total, sizes, prev, pager, next, jumper",total:e.pageInfo.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},z=[],q=n("2382"),E={data:function(){return{pageInfo:{total:0,size:1,current:1,keyword:""},records:[]}},methods:{gotoDetails:function(e){sessionStorage.setItem(q.goodsInfo,JSON.stringify(e)),this.$router.push({name:"goodsInfo"})},handleSizeChange:function(e){this.pageInfo.size=e,this.handleCurrentChange()},handleCurrentChange:function(e){var t=this;this.pageInfo.current=e,P.requestGet(q.urlPreGoods+"/goods/list",this.pageInfo).then((function(e){var n=e.data;200===e.state&&(t.pageInfo.total=n.total,t.records=n.records)}),(function(){}))}},created:function(){this.handleCurrentChange()}},L=E,G=(n("6e49"),Object(u["a"])(L,$,z,!1,null,"0de6460e",null)),K=G.exports,N=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("div",{staticClass:"user-info"},[s("div",{staticClass:"user-name btn-show",on:{click:e.showOrders}},[e._v("查看订单")]),s("div",{staticClass:"user-img"},[s("img",{attrs:{src:n("c3b1")}}),e.isLogin?s("div",{staticClass:"user-name"},[e._v(e._s(e.userInfo.nickname))]):s("div",{staticClass:"user-name",on:{click:e.redirectLogin}},[e._v("请登录")]),s("div",{staticClass:"user-name btn-show",on:{click:e.showAmount}},[e._v("查看余额")])])]),s("div",{staticClass:"rt-view"},[s("router-view")],1)])},A=[],J=n("2382"),M={data:function(){return{isLogin:!1,userInfo:{}}},methods:{showAmount:function(){var e=this;P.requestGet(J.urlPreUser+"/user/amount").then((function(t){200===t.state?e.$message({message:t.data,type:"success",showClose:!0}):e.$message({message:"余额:"+t.data,type:"warning",showClose:!0})}),(function(){e.$message({message:"网络繁忙，稍后再试",type:"warning",showClose:!0})}))},redirectLogin:function(){this.$router.push({path:"/login"})},showOrders:function(){this.$router.push({path:"/index/order"})}},created:function(){var e=sessionStorage.getItem(J.userInfo);if(null!=e){var t=JSON.parse(e);this.userInfo=t,this.isLogin=!0}}},R=M,H=(n("fbf5"),Object(u["a"])(R,N,A,!1,null,"27d6a6ea",null)),U=H.exports,B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"goods-info"},[n("div",{staticClass:"goods-info-top"},[e._m(0),n("div",{staticClass:"goods-params"},[n("ul",[n("li",[e._v(e._s(e.goods.name))]),n("li",[e._v(e._s(e.goods.title))]),n("li",{staticClass:"skuParams"},[n("span",[e._v("规格选择:")]),e._l(e.skus,(function(t){return n("span",{key:t.skuId,staticClass:"skuParamSelect",on:{click:function(n){return e.changeSku(t)}}},[e._v(e._s(t.skuParams.replace("{","").replace("}","")))])}))],2),n("li",[e._v("当前选中:"+e._s(e.currentSku.skuParams.replace("{","").replace("}","")))]),n("li",[e._v("价格："+e._s(e.currentSku.price)+"元")]),n("li",[e._v("库存："+e._s(e.currentSku.skuReserve))]),n("li",{staticClass:"buy-btn"},[n("el-button",{attrs:{type:"primary"},on:{click:e.doBuy}},[e._v("购买")])],1)])])])])},D=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"goods-info-img"},[s("img",{attrs:{src:n("c3b1")}})])}],F=n("2382"),Q={data:function(){return{goods:{},currentSku:{},isSelect:!1,skus:[]}},methods:{changeSku:function(e){this.currentSku=e},doBuy:function(){var e=this,t=sessionStorage.getItem(F.accessTokenKey);if(t){var n=JSON.parse(JSON.stringify(this.goods));n.skuParams=this.currentSku.skuParams,n.skuId=this.currentSku.skuId,n.goodsPricePer=this.currentSku.price,n.startTime="",n.skus="",n.endTime="",P.requestPost(F.urlPreOrder+"/order/add",n).then((function(t){e.$message({message:t.data,type:"success",showClose:!0})}),(function(){e.$message({message:"操作失败",type:"warning",showClose:!0})}))}else this.$router.push({path:"/login"})}},created:function(){},mounted:function(){var e=this,t=sessionStorage.getItem(F.goodsInfo),n=JSON.parse(t);this.goods=n,P.requestGet(F.urlPreGoods+"/sku/"+n.goodsId).then((function(t){200===t.state&&(e.skus=t.data,e.currentSku=e.skus[0])}),(function(){}))}},V=Q,W=(n("8f58"),Object(u["a"])(V,B,D,!1,null,"54bbfb82",null)),X=W.exports,Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.records,border:""}},[n("el-table-column",{attrs:{prop:"goodsName",label:"商品名称",width:"150"}}),n("el-table-column",{attrs:{prop:"goodsNum",label:"数量",width:"150"}}),n("el-table-column",{attrs:{prop:"payPrice",label:"价格",width:"150"}}),n("el-table-column",{attrs:{prop:"takeTime",label:"下单时间",width:"150"}}),n("el-table-column",{attrs:{prop:"payTime",label:"支付时间",width:"150"}}),n("el-table-column",{attrs:{prop:"stateStr",label:"状态",width:"150"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.payOrder(t.row)}}},[e._v("支付")])]}}])})],1)],1),n("div",{staticClass:"block"},[n("el-pagination",{attrs:{"current-page":e.pageInfo.current,"page-sizes":[1,2,8],"page-size":e.pageInfo.size,layout:"total, sizes, prev, pager, next, jumper",total:e.pageInfo.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},Z=[],ee=n("2382"),te={data:function(){return{records:[],pageInfo:{total:0,size:1,current:1,keyword:""}}},methods:{payOrder:function(e){var t=this;P.requestGet(ee.urlPreUser+"/user/pay",{orderId:e.orderId,userId:e.userId}).then((function(e){200===e.state?t.$message({message:e.data,type:"success",showClose:!0}):t.$message({message:e.fail,type:"warning",showClose:!0})}),(function(){t.$message({message:"支付失败~",type:"warning",showClose:!0})}))},handleSizeChange:function(e){this.pageInfo.size=e,this.handleCurrentChange()},handleCurrentChange:function(e){var t=this;this.pageInfo.current=e,P.requestGet(ee.urlPreOrder+"/order/records",this.pageInfo).then((function(e){var n=e.data;200===e.state&&(t.pageInfo.total=n.total,t.records=n.records)}),(function(){}))}},created:function(){this.handleCurrentChange()}},ne=te,se=(n("7cea"),Object(u["a"])(ne,Y,Z,!1,null,"02f4a039",null)),re=se.exports;s["default"].use(f["a"]);var oe=[{path:"/",redirect:"/login"},{path:"/index",redirect:"/index/goods"},{path:"/login",name:"Login",component:T},{path:"/index",name:"index",component:U,children:[{path:"goods",name:"goods",component:K},{path:"order",name:"order",component:re},{path:"goodsinfo",name:"goodsInfo",component:X}]},{path:"/home",name:"Home",component:v},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],ae=new f["a"]({routes:oe}),ie=ae,ue=n("2f62");s["default"].use(ue["a"]);var ce=new ue["a"].Store({state:{},mutations:{},actions:{},modules:{}}),le=(n("0fb7"),n("450d"),n("f529")),fe=n.n(le),de=(n("5466"),n("ecdf")),pe=n.n(de),he=(n("38a0"),n("ad41")),ge=n.n(he),me=(n("672e"),n("101e")),ve=n.n(me),be=(n("10cb"),n("f3ad")),we=n.n(be),ke=(n("eca7"),n("3787")),ye=n.n(ke),_e=(n("425f"),n("4105")),Ce=n.n(_e),Ie=(n("1951"),n("eedf")),Pe=n.n(Ie);s["default"].use(Pe.a),s["default"].use(Ce.a),s["default"].use(ye.a),s["default"].use(we.a),s["default"].use(ve.a),s["default"].use(ge.a),s["default"].use(pe.a),s["default"].prototype.$message=fe.a,s["default"].prototype.$axios=y.a,s["default"].config.productionTip=!1,new s["default"]({router:ie,store:ce,render:function(e){return e(l)}}).$mount("#app")},"6e49":function(e,t,n){"use strict";var s=n("f1ff"),r=n.n(s);r.a},"7cea":function(e,t,n){"use strict";var s=n("b4e9"),r=n.n(s);r.a},"85ec":function(e,t,n){},"8f58":function(e,t,n){"use strict";var s=n("f571"),r=n.n(s);r.a},a85f:function(e,t,n){},a8df:function(e,t,n){},b4e9:function(e,t,n){},c3b1:function(e,t,n){e.exports=n.p+"img/0.074aff61.jpg"},cf05:function(e,t,n){e.exports=n.p+"img/logo.82b9c7a5.png"},f1ff:function(e,t,n){},f571:function(e,t,n){},fbf5:function(e,t,n){"use strict";var s=n("a8df"),r=n.n(s);r.a}});
//# sourceMappingURL=app.2e3294ee.js.map